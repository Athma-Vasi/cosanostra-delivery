import gleam/int
import gleam/list
import gleam/string
import youid/uuid

pub fn random_content() -> String {
  let content_options = [
    "Carbon paper", "Rolodex", "Protractor", "Fountain pen",
  ]
  let rand_idx = content_options |> list.length |> int.random

  content_options
  |> list.index_fold(from: "", with: fn(acc, curr, idx) {
    case idx == rand_idx {
      True -> curr
      False -> acc
    }
  })
}

pub fn generate_package_id() -> String {
  uuid.v4_string()
  |> string.replace(each: "-", with: "X")
  |> string.replace(each: "_", with: "X")
}

fn generate_random_geoid() {
  let wyoming_geoids = [
    56_001_962_700, 56_001_962_800, 56_001_962_900, 56_001_963_000,
    56_001_963_101, 56_001_963_102, 56_001_963_400, 56_001_963_500,
    56_001_963_600, 56_001_963_700, 56_001_963_900, 56_003_962_600,
    56_003_962_700, 56_003_962_800, 56_005_000_101, 56_005_000_102,
    56_005_000_103, 56_005_000_200, 56_005_000_300, 56_005_000_400,
    56_005_000_500, 56_005_000_600, 56_005_000_701, 56_005_000_702,
    56_007_967_600, 56_007_967_700, 56_007_967_800, 56_007_968_000,
    56_007_968_100, 56_009_956_400, 56_009_956_500, 56_009_956_600,
    56_009_956_700, 56_011_950_200, 56_011_950_300, 56_013_000_100,
    56_013_000_200, 56_013_000_301, 56_013_000_302, 56_013_000_400,
    56_013_940_100, 56_013_940_201, 56_013_940_202, 56_013_940_301,
    56_013_940_302, 56_013_940_400, 56_013_940_500, 56_015_957_700,
    56_015_957_800, 56_015_957_900, 56_015_958_000, 56_017_967_800,
    56_017_967_900, 56_019_955_100, 56_019_955_201, 56_019_955_202,
    56_021_000_200, 56_021_000_300, 56_021_000_401, 56_021_000_403,
    56_021_000_404, 56_021_000_502, 56_021_000_503, 56_021_000_601,
    56_021_000_602, 56_021_000_701, 56_021_000_702, 56_021_000_800,
    56_021_000_900, 56_021_001_000, 56_021_001_100, 56_021_001_200,
    56_021_001_301, 56_021_001_302, 56_021_001_401, 56_021_001_402,
    56_021_001_501, 56_021_001_502, 56_021_001_901, 56_021_001_902,
    56_021_002_001, 56_021_002_002, 56_021_980_801, 56_023_978_001,
    56_023_978_002, 56_023_978_100, 56_023_978_200, 56_023_978_400,
    56_025_000_200, 56_025_000_300, 56_025_000_400, 56_025_000_501,
    56_025_000_502, 56_025_000_601, 56_025_000_602, 56_025_000_700,
    56_025_000_800, 56_025_000_901, 56_025_000_902, 56_025_001_000,
    56_025_001_100, 56_025_001_200, 56_025_001_401, 56_025_001_602,
    56_025_001_603, 56_025_001_700, 56_025_001_801, 56_025_001_802,
    56_027_957_200, 56_029_965_100, 56_029_965_200, 56_029_965_301,
    56_029_965_302, 56_029_965_401, 56_029_965_402, 56_029_965_500,
    56_031_959_100, 56_031_959_401, 56_031_959_402, 56_033_000_100,
    56_033_000_200, 56_033_000_300, 56_033_000_400, 56_033_000_501,
    56_033_000_502, 56_033_000_600, 56_035_000_101, 56_035_000_103,
    56_035_000_104, 56_037_970_500, 56_037_970_601, 56_037_970_602,
    56_037_970_700, 56_037_970_800, 56_037_970_902, 56_037_970_903,
    56_037_970_904, 56_037_970_905, 56_037_971_000, 56_037_971_100,
    56_037_971_200, 56_037_971_600, 56_039_967_601, 56_039_967_602,
    56_039_967_701, 56_039_967_703, 56_039_967_704, 56_039_967_801,
    56_039_967_802, 56_041_975_201, 56_041_975_202, 56_041_975_301,
    56_041_975_302, 56_041_975_401, 56_041_975_402, 56_043_000_200,
    56_043_000_301, 56_043_000_302, 56_045_951_100, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300, 56_045_951_300, 56_045_951_300,
    56_045_951_300, 56_045_951_300,
  ]
  let rand_idx = wyoming_geoids |> list.length |> int.random

  wyoming_geoids
  |> list.index_fold(from: 0, with: fn(acc, curr, idx) {
    case idx == rand_idx {
      True -> curr
      False -> acc
    }
  })
}

fn random_packages_helper(packages: List(#(Int, #(String, String))), amount) {
  case amount == 0 {
    True -> packages
    False -> {
      let rand_id = generate_package_id()
      let rand_content = random_content()
      let rand_geoid = generate_random_geoid()
      random_packages_helper(
        [#(rand_geoid, #(rand_id, rand_content)), ..packages],
        amount - 1,
      )
    }
  }
}

pub fn random_packages(amount: Int) -> List(#(Int, #(String, String))) {
  random_packages_helper([], amount)
}
